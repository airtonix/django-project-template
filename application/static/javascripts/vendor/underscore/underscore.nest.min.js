/**
* underscore.nest - v0.1.1 - 7/13/2012
* http://github.com/iros/underscore.nest/
* Copyright (c) 2012 Irene Ros;
* Underscore.Nest is freely distributable under the MIT license.
*/
(function(a,_){var b=a.nest={},c=function(a){return _.map(a,function(a,b){return{name:b,children:a}})};b.nest=function(a,b,d){_.isString(b)&&(b=[b]);var e=function(f,g,h){if(g===0){f.children=c(_.groupBy(a,b[0]));if(g<b.length)for(var i=0;i<f.children.length;i++)e(f.children[i],g+1,i)}else{f.index=h;if(g>=b.length)typeof d!="undefined"&&(f.value=d(f.children),delete f.children);else{f.children=c(_.groupBy(f.children,b[g]));for(var j=0;j<f.children.length;j++)e(f.children[j],g+1,j)}}return f};return e({},0)},typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(module.exports=b),exports.nester=b):typeof define=="function"&&define.amd?define("underscore.nest",[],function(){return b}):a._.mixin(b)})(this,_)